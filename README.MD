# ğŸ“š API de Cursos Virtuales - Proyecto Final CS2032

## ğŸ“ InformaciÃ³n AcadÃ©mica

**Universidad:** Universidad de IngenierÃ­a y TecnologÃ­a (UTEC)  
**Curso:** CS2032 - Cloud Computing (Ciclo 2025-1)  
**Proyecto:** Final - Semanas 11-15 (ExposiciÃ³n Semana 16)  
**Tipo:** Grupo 5 - Cursos Virtuales (Referencia: [Udemy](https://www.udemy.com/))  
**Desarrollador:** Fernando Aguilar  
**Email:** segundo.aguilar@utec.edu.pe  

---

## ğŸš€ DescripciÃ³n del Proyecto

API Serverless Multi-tenant para la gestiÃ³n completa de cursos virtuales, desarrollada como parte del proyecto final del curso CS2032. La aplicaciÃ³n implementa una arquitectura moderna basada en microservicios utilizando AWS Lambda, API Gateway y DynamoDB.

### ğŸ¯ Objetivos Cumplidos

âœ… **Backend (6 puntos)**
- Microservicio Multi-tenancy y Serverless en Node.js
- IntegraciÃ³n con DynamoDB para persistencia
- Sistema completo CRUD para gestiÃ³n de cursos
- ProtecciÃ³n mediante tokens JWT
- Despliegue automatizado en mÃºltiples stages (dev, test, prod)
- DocumentaciÃ³n completa con Swagger/OpenAPI 3.0

---

## ğŸ“– DocumentaciÃ³n de la API

### ğŸŒ DocumentaciÃ³n Interactiva

**ğŸ“‹ [Ver DocumentaciÃ³n Completa en SwaggerHub](https://app.swaggerhub.com/apis-docs/utec-e9b/api-cursos/1.0.0)**

La documentaciÃ³n incluye:
- ğŸ“ Especificaciones detalladas de todos los endpoints
- ğŸ§ª Interfaz interactiva para probar la API
- ğŸ“Š Ejemplos de requests y responses
- ğŸ” InformaciÃ³n de autenticaciÃ³n y seguridad
- ğŸ“š Esquemas de datos completos

### ğŸ”— Enlaces Adicionales

- **Repositorio:** [github.com/MrFernandoc/api-cursos](https://github.com/MrFernandoc/api-cursos)
- **Swagger YAML:** [swagger.yml](./swagger.yml)

---

## ğŸ—ï¸ Arquitectura TÃ©cnica

### **Stack TecnolÃ³gico**
- **Framework:** Serverless Framework
- **Runtime:** Node.js 18.x
- **Cloud Provider:** Amazon Web Services (AWS)
- **Base de Datos:** DynamoDB con Global Secondary Index
- **AutenticaciÃ³n:** JWT Multi-tenant
- **DocumentaciÃ³n:** OpenAPI 3.0 / Swagger

### **Servicios AWS Utilizados**
- **AWS Lambda:** Funciones serverless para la lÃ³gica de negocio
- **API Gateway:** GestiÃ³n de endpoints REST
- **DynamoDB:** Base de datos NoSQL para persistencia
- **IAM:** GestiÃ³n de permisos y roles

### **Arquitectura Multi-tenant**
- Aislamiento de datos por `tenant_id`
- AutenticaciÃ³n centralizada via API externa
- Escalabilidad automÃ¡tica por tenant

---

## ğŸ”— Endpoints Disponibles

**Base URL:** `https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev`

| MÃ©todo | Endpoint | DescripciÃ³n | AutenticaciÃ³n |
|--------|----------|-------------|---------------|
| POST | `/cursos/crear` | Crear nuevo curso | ğŸ”’ JWT Required |
| GET | `/cursos/listar` | Listar cursos (paginado) | ğŸ”’ JWT Required |
| GET | `/cursos/buscar/{curso_id}` | Buscar curso por ID | ğŸ”’ JWT Required |
| PUT | `/cursos/modificar/{curso_id}` | Modificar curso existente | ğŸ”’ JWT Required |
| DELETE | `/cursos/eliminar/{curso_id}` | Eliminar curso | ğŸ”’ JWT Required |
| POST | `/cursos/poblar` | Poblar datos de prueba | ğŸ”’ JWT Required |

---

## ğŸ” AutenticaciÃ³n

Todos los endpoints requieren un token JWT vÃ¡lido obtenido desde la API de usuarios externa.

### **Header Requerido:**
```http
Authorization: Bearer <tu-token-jwt>
```

### **API de Usuarios Externa:**
```
Base URL: https://c0fmkco8rb.execute-api.us-east-1.amazonaws.com/dev
Endpoint de validaciÃ³n: /usuario/validar
```

---

## ğŸ’» Uso de la API

### **Ejemplo: Listar Cursos**
```bash
curl -X GET \
  "https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev/cursos/listar?limit=5" \
  -H "Authorization: Bearer tu-token-jwt" \
  -H "Content-Type: application/json"
```

### **Ejemplo: Crear Curso**
```bash
curl -X POST \
  "https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev/cursos/crear" \
  -H "Authorization: Bearer tu-token-jwt" \
  -H "Content-Type: application/json" \
  -d '{
    "curso_datos": {
      "nombre": "React.js Profesional",
      "descripcion": "Curso completo de React.js con Hooks y Context API",
      "nivel": "Avanzado",
      "duracion_horas": 60,
      "precio": 299.99,
      "publicado": true,
      "etiquetas": ["react", "javascript", "frontend", "hooks"],
      "instructor": "Ana GarcÃ­a LÃ³pez"
    }
  }'
```

### **Ejemplo: Buscar Curso**
```bash
curl -X GET \
  "https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev/cursos/buscar/550e8400-e29b-41d4-a716-446655440000" \
  -H "Authorization: Bearer tu-token-jwt"
```

---

## ğŸš€ Despliegue

### **Prerrequisitos**
- Node.js 18.x o superior
- AWS CLI configurado
- Serverless Framework instalado globalmente

### **InstalaciÃ³n**
```bash
# Clonar repositorio
git clone https://github.com/MrFernandoc/api-cursos.git
cd api-cursos

# Instalar dependencias
npm install

# Instalar Serverless Framework (si no estÃ¡ instalado)
npm install -g serverless
```

### **Despliegue a AWS**
```bash
# Desplegar a desarrollo
serverless deploy

# Desplegar a un stage especÃ­fico
serverless deploy --stage test
serverless deploy --stage prod

# Ver informaciÃ³n del despliegue
serverless info
```

### **Stages Disponibles**
- **dev:** Ambiente de desarrollo
- **test:** Ambiente de pruebas
- **prod:** Ambiente de producciÃ³n

---

## ğŸ“Š CaracterÃ­sticas Principales

### **ğŸ”’ Seguridad**
- AutenticaciÃ³n JWT obligatoria en todos los endpoints
- ValidaciÃ³n externa de tokens
- Aislamiento de datos multi-tenant
- Manejo seguro de errores sin exposiciÃ³n de informaciÃ³n sensible

### **ğŸ“ˆ Escalabilidad**
- Arquitectura serverless con escalamiento automÃ¡tico
- Base de datos DynamoDB con capacidad bajo demanda
- OptimizaciÃ³n con Global Secondary Index para consultas eficientes

### **ğŸ› ï¸ Funcionalidades**
- CRUD completo para gestiÃ³n de cursos
- PaginaciÃ³n inteligente en listados
- BÃºsqueda por ID con validaciÃ³n de pertenencia al tenant
- FunciÃ³n de poblado automÃ¡tico para testing
- Validaciones robustas de entrada

### **ğŸ“‹ Datos de Curso**
```json
{
  "curso_datos": {
    "nombre": "string (requerido)",
    "descripcion": "string",
    "nivel": "BÃ¡sico|Intermedio|Avanzado",
    "duracion_horas": "number",
    "precio": "number (float)",
    "publicado": "boolean",
    "etiquetas": ["array", "de", "strings"],
    "instructor": "string",
    "fecha_modificacion": "ISO Date (auto)"
  }
}
```

---

## ğŸ—„ï¸ Estructura de Base de Datos

### **Tabla Principal: `{stage}-t_cursos`**

#### **Claves Primarias:**
- **Partition Key:** `tenant_id` (String)
- **Sort Key:** `curso_id` (String - UUID)

#### **Atributos:**
- `tenant_id`: Identificador del tenant
- `curso_id`: Identificador Ãºnico del curso (UUID)
- `curso_datos`: Objeto con toda la informaciÃ³n del curso
- `fecha_creacion`: Timestamp de creaciÃ³n (ISO String)

#### **Ãndices Secundarios:**
- **CursosPorFechaIndex:** Permite consultas ordenadas por fecha de creaciÃ³n
  - Partition Key: `tenant_id`
  - Sort Key: `fecha_creacion`

---

## ğŸ§ª Testing y Datos de Prueba

### **FunciÃ³n de Poblado**
La API incluye un endpoint especial para generar datos de prueba:

```bash
# Poblar 10 cursos por defecto
curl -X POST \
  "https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev/cursos/poblar" \
  -H "Authorization: Bearer tu-token-jwt"

# Poblar cantidad especÃ­fica
curl -X POST \
  "https://r9ttk3it54.execute-api.us-east-1.amazonaws.com/dev/cursos/poblar" \
  -H "Authorization: Bearer tu-token-jwt" \
  -H "Content-Type: application/json" \
  -d '{"cantidad": 25}'
```

### **Datos Generados**
- Cursos secuenciales: "ProgramaciÃ³n 1", "ProgramaciÃ³n 2", etc.
- Niveles progresivos: BÃ¡sico (1-10), Intermedio (11-20), Avanzado (21+)
- Precios escalables: Base $49.99 + ($5 Ã— nÃºmero)
- Duraciones variables: Base 20h + (2h Ã— nÃºmero)

---

## ğŸ“ Estructura del Proyecto

```
api-cursos/
â”œâ”€â”€ serverless.yml              # ConfiguraciÃ³n de Serverless Framework
â”œâ”€â”€ swagger.yml                 # DocumentaciÃ³n OpenAPI 3.0
â”œâ”€â”€ package.json               # Dependencias y scripts
â”œâ”€â”€ README.md                  # Este archivo
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ handlers/              # Funciones Lambda
â”‚   â”‚   â”œâ”€â”€ crearCurso.js      # POST /cursos/crear
â”‚   â”‚   â”œâ”€â”€ listarCursos.js    # GET /cursos/listar
â”‚   â”‚   â”œâ”€â”€ buscarCurso.js     # GET /cursos/buscar/{id}
â”‚   â”‚   â”œâ”€â”€ modificarCurso.js  # PUT /cursos/modificar/{id}
â”‚   â”‚   â”œâ”€â”€ eliminarCurso.js   # DELETE /cursos/eliminar/{id}
â”‚   â”‚   â””â”€â”€ poblarCursos.js    # POST /cursos/poblar
â”‚   â”œâ”€â”€ middlewares/
â”‚   â”‚   â””â”€â”€ authMiddleware.js  # ValidaciÃ³n JWT externa
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ response.js        # Utilidades para respuestas HTTP
â””â”€â”€ .gitignore
```

---

## ğŸ”§ ConfiguraciÃ³n del Proyecto

### **Variables de Entorno**
```yaml
# serverless.yml
environment:
  TABLE_NAME: ${sls:stage}-t_cursos
```

### **ConfiguraciÃ³n DynamoDB**
```yaml
# Tabla con configuraciÃ³n Ã³ptima
BillingMode: PAY_PER_REQUEST    # Escalamiento automÃ¡tico
StreamSpecification:            # Para futuras integraciones
  StreamViewType: NEW_AND_OLD_IMAGES
```

---

## ğŸ“ˆ MÃ©tricas y Monitoreo

### **Funciones Desplegadas**
- âœ… 6 funciones Lambda activas
- ğŸ“¦ TamaÃ±o: 24 MB cada funciÃ³n
- âš¡ Runtime: Node.js 18.x
- ğŸŒ RegiÃ³n: us-east-1

### **Performance**
- **Timeout:** 29 segundos por funciÃ³n
- **Memoria:** 1024 MB por funciÃ³n
- **Concurrencia:** Ilimitada (AWS Lambda)

---

## ğŸ“ Cumplimiento de Requisitos AcadÃ©micos

### **âœ… Backend (6 puntos) - COMPLETADO**
- [x] Microservicio Multi-tenancy y Serverless
- [x] Node.js con DynamoDB
- [x] Operaciones: Listar (paginado), Crear, Buscar, Modificar, Eliminar
- [x] ProtecciÃ³n con tokens JWT
- [x] Despliegue automatizado en 3 stages
- [x] DocumentaciÃ³n con Swagger UI

### **ğŸ—ï¸ Arquitectura Implementada**
- **Multi-tenancy:** âœ… Implementado via `tenant_id`
- **Serverless:** âœ… AWS Lambda + API Gateway
- **DocumentaciÃ³n:** âœ… OpenAPI 3.0 completa en SwaggerHub

---

## ğŸ“ Contacto y Soporte

**Desarrollador:** Segundo Aguilar  
**Email:** segundo.aguilar@utec.edu.pe  
**GitHub:** [@MrFernandoc](https://github.com/MrFernandoc)  
**Universidad:** UTEC - Universidad de IngenierÃ­a y TecnologÃ­a  

### **ğŸ“‹ Enlaces Importantes**
- ğŸ“– **DocumentaciÃ³n API:** [SwaggerHub](https://app.swaggerhub.com/apis-docs/utec-e9b/api-cursos/1.0.0)
- ğŸ’» **Repositorio:** [GitHub](https://github.com/MrFernandoc/api-cursos)
- ğŸ“ **Curso:** CS2032 - Cloud Computing

---

## ğŸ“„ Licencia

Este proyecto es desarrollado con fines acadÃ©micos como parte del curso CS2032 - Cloud Computing de la Universidad de IngenierÃ­a y TecnologÃ­a (UTEC).

---

### ğŸ”— Para Probar la API

1. **Ver DocumentaciÃ³n:** [SwaggerHub](https://app.swaggerhub.com/apis-docs/utec-e9b/api-cursos/1.0.0)
2. **Obtener Token JWT:** Usar la API de usuarios externa
3. **Probar Endpoints:** Usar la interfaz "Try it out" en SwaggerHub
4. **Revisar CÃ³digo:** Explorar el repositorio en GitHub

---

**ğŸ¯ Proyecto desarrollado para demostrar competencias en Cloud Computing, arquitecturas serverless y desarrollo de APIs RESTful en AWS.**